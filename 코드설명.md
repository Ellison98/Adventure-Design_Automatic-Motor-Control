코드 설명
라이브러리 임포트:
serial: 아두이노와의 시리얼 통신을 위한 라이브러리입니다.
busio: I2C 통신을 위해 사용됩니다.
board: SCL과 SDA 핀의 정의를 가져옵니다.
adafruit_pca9685: PCA9685 모듈을 제어하기 위한 라이브러리입니다.


PCA9685 설정:
I2C 버스를 초기화하고 PCA9685 인스턴스를 생성합니다.
PWM 주파수를 60Hz로 설정하여 서보 및 DC 모터를 제어할 수 있습니다.


PWM 맵핑:
각 % 값에 대한 PWM 값을 정의하는 두 개의 딕셔너리를 생성합니다. 이 딕셔너리는 스티어링과 쓰로틀에 대한 매핑을 제공합니다.


get_pwm_from_percent 함수:
주어진 % 값을 입력받아 해당하는 PWM 값을 반환합니다. 매핑에 값이 없으면 None을 반환합니다.


set_motor_pwm 함수:
스티어링과 쓰로틀의 % 값을 PWM 값으로 변환하고, 변환된 값을 PCA9685의 해당 채널에 설정합니다. 유효하지 않은 PWM 값일 경우 경고 메시지를 출력합니다.


running 함수:
아두이노에서 데이터를 시리얼로 읽어오는 무한 루프를 실행합니다. 받은 데이터는 쉼표로 구분하여 분리하고, 각각의 값을 % 값으로 변환한 후 모터를 제어합니다.


메인 실행:
if __name__ == "__main__": 조건문을 통해 스크립트가 직접 실행될 때 running 함수를 호출합니다.


결론
이 코드는 아두이노에서 수신한 스티어링과 쓰로틀 % 값을 기반으로 모터의 PWM 신호를 설정하는 작업을 수행합니다. 주석을 통해 각 부분의 기능을 명확히 하고, 코드의 흐름을 쉽게 이해할 수 있도록 구성하였습니다.




steering(1342) / 14465 * 65535

